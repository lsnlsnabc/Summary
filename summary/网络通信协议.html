<html>
<head>
  <title>网络通信协议</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/305825 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="422"/>
<h1>网络通信协议</h1>

<div>
<span><div><div>网络通信协议原理</div><div><hr/>
TCP/IP-- 网络七（四）层协议</div><div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col><col style="width: 160px;"></col><col style="width: 155px;"></col></colgroup><tbody><tr><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">七层协议层次结构</div></td><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">四层协议</div></td><td style="width: 160px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">对应的设备</div></td><td style="width: 155px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">对应的协议</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">应用层</div></td><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">应用层</div></td><td style="width: 160px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">网关</div></td><td style="width: 155px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">TELNET、HTTP、FTP</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">表示层</div></td><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">应用层</div></td><td style="width: 160px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">网关</div></td><td style="width: 155px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">加密</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">会话层</div></td><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">应用层</div></td><td style="width: 160px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">网关</div></td><td style="width: 155px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">SQL</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">传输层</div></td><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">传输层</div></td><td style="width: 160px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">网关</div></td><td style="width: 155px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">TCP、UDP</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">网络层</div></td><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">网络层</div></td><td style="width: 160px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">路由器</div></td><td style="width: 155px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">IP</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">数据链路层</div></td><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">网络接口层</div></td><td style="width: 160px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">网桥、交换机</div></td><td style="width: 155px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">ARP、RARP</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">物理层</div></td><td style="width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">网络接口层</div></td><td style="width: 160px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;">网卡、网线、中继器等</div></td><td style="width: 155px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div style="text-align: center;"><br/></div></td></tr></tbody></table></div><div>TCP（Transmission Control Protocol，传输控制协议）</div><div><ul><li><span style="font-family: 宋体; line-height: 1.45;">定义：一种面向连接的、可靠的、基于字节流的传输层通信协议，协议号为6</span><br/></li><li><span style="font-family: 宋体; line-height: 1.45;">报文头部格式：</span><br/></li></ul></div><div style="text-align: center;"><img src="网络通信协议_files/Image.png" type="image/png" data-filename=""/></div><div><ul><li><span style="font-family: 宋体; line-height: 1.45;">连接的建立与终止：</span><br/></li></ul></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font style="font-family: 宋体;">原理图：</font></div><div style="text-align: center;"><img src="网络通信协议_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><div><font style="font-family: 宋体;">三次握手：</font></div><div><span style="color: rgb(69, 69, 69); letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-family: 宋体; font-size: 10pt;">首先Client端发送连接请求报文，Server<span style="font-family: 宋体; color: rgb(69, 69, 69);">端</span>接受连接后回复ACK报文，并为这次连接分配资源。Client端接收到ACK报文后也向Server<span style="font-family: 宋体; color: rgb(69, 69, 69);">端</span>发生ACK报文，并分配资源，TCP连接就建立了。</font></span></div><div><font style="font-family: 宋体;">四次挥手：</font></div><div><font style="font-family: 宋体;">首先Client端发送FIN报文请求终止连接，Server端接受后回复确认收到FIN报文并且进行断开连接，然后发送FIN报文给Client端，Client端接收到报文，回复ACK表示收到，等待断开连接。</font></div></blockquote><div><ul><li><span style="font-family: 宋体; line-height: 1.45;">TCP状态转换：</span><br/></li></ul></div><div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>共十一种状态，如原理图所示，添加一种，CLOSING</div></blockquote></div><div><ul><li><span style="font-family: 宋体; line-height: 1.45;">Nagle算法与延迟ACK：</span><br/></li></ul></div><div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font style="font-family: 宋体;">Nagle算法：</font></div><div><font face="宋体">为了减少广域网的分组数目，从而减少网络拥塞的出现，该算法要求在一个TCP连接上，当某个小组的数据没有全部收到ACK确认时，下一个小组是不能发送数据的</font></div><div><font style="font-family: 宋体;">延迟ACK：</font></div><div><font face="宋体">如果TCP对每个数据包都发送一个ACK确认，那么代价比较高，所以TCP会延迟一段时间，如果这段时间内有数据发送到对端，则捎带发送ACK，如果在延迟ACK定时器触发时，发现ACK尚未发送，则立即单独发送</font></div><div><font face="宋体">两者同时使用会产生死锁现象。</font></div></blockquote></div><div><ul><li><span style="font-family: 宋体; line-height: 1.45;">快速重传与快速恢复（</span><font style="font-family: 宋体; line-height: 1.45; color: rgb(255, 70, 53);">待整理</font><span style="font-family: 宋体; line-height: 1.45;">）：</span><br/></li></ul></div><div><br/></div><div>UDP（User Datagram Protocol，用户数据报协议）</div><div><ul><li><font style="line-height: 1.45; font-family: 宋体;">定义：</font><font style="line-height: 1.45; font-family: 宋体;">提供面向事物的简单不可靠信息传送服务，协议号为17</font><br/></li><li><span style="font-family: 宋体; line-height: 1.45;">报文头部格式：</span><br/></li></ul></div><div style="text-align: center;"><img src="网络通信协议_files/Image [2].png" type="image/png" data-filename=""/></div><div><br/></div><div>HTTP（HyperText Transfer Protocol，超文本传输协议）</div><div><ul><li><span style="font-family: 宋体; line-height: 1.45;">定义：HTTP是一个客户端和服务器端请求和应答的标准</span><br/></li><li><span style="font-family: 宋体; line-height: 1.45;">版本：</span><br/></li></ul></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font face="宋体">HTTP1.0：请求与响应支持头域；响应对象以一个响应状态行开始；响应对象不只限于超文本；开始支持客户端通过POST方法像WEB服务器提交数据；支持长连接（但默认使用短连接）；缓存机制；身份认证</font></div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font style="font-family: 宋体;">HTTP1.1：相对于HTTP1.0，增加了keeplive(长)连接；chunked编码传输；字节范围请求；请求流水线</font></div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font face="宋体">HTTP2.0：相对于HTTP1.1，增加了多路复用；头部压缩；随时复位；服务器端推流；优先权和依赖</font></div></blockquote><div><ul><li><span style="font-family: 宋体; line-height: 1.45;">响应状态码：</span><br/></li></ul></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font style="font-family: 宋体;">1xx：消息</font></div><div><font face="宋体">2xx：成功</font></div><div><font face="宋体">3xx：重定向</font></div><div><font face="宋体">4xx：客户端请求错误</font></div><div><font face="宋体">5xx：服务器错误</font></div></blockquote><div><ul><li><span style="font-family: 宋体; line-height: 1.45;">数据传输方式：</span><br/></li></ul></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font style="font-family: 宋体;">类似与数据库中的增删改查，区分了客户端向服务器发出了一系列请求方法。</font></div><div><font style="font-family: 宋体;">GET:获取服务器上的某个资源，发送的信息有最大长度限制</font></div><div><font face="宋体">HEAD:用于获取报头</font></div><div><font face="宋体">PUT:从客户端向服务器传送的数据取代制定的文档内容，相当于修改</font></div><div><font face="宋体">DELETE:请求服务器删除制定的页面</font></div><div><font face="宋体">POST:向指定资源提交数据进行处理请求，数据包含在请求体中，不限制大小。</font></div><div><font face="宋体">OPTIONS:允许客户端查看服务器性能</font></div></blockquote><div><ul><li><span style="font-family: 宋体; line-height: 1.45;">cookie和session：（</span><font style="font-family: 宋体; line-height: 1.45; color: rgb(255, 0, 0);">待查询</font><span style="font-family: 宋体; line-height: 1.45;">）</span><br/></li><li><span style="font-family: 宋体; line-height: 1.45;">HTTPS与HTTP区别：</span><br/></li></ul></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font style="font-family: 宋体;">HTTPS是HTTP的安全版，在HTTP的基础上加入SSL层，进行加密。</font></div><div><font face="宋体">HTTPS协议需要到CA申请证书</font></div><div><font face="宋体">HTTPS具有安全的ssl加密传输协议</font></div><div><font face="宋体">运用不同的连接方式，端口号也于HTTP不同，HTTP为80，HTTPS为443</font></div></blockquote><div><br/></div><div>DNS（Domain Name System，域名系统）</div><div><font face="宋体">定义：在因特网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便访问互联网，而不用去基础能够呗机器直接读取的IP数串</font></div><div><font face="宋体">DNS查询方法：</font></div><div style="text-align: center;"><img src="网络通信协议_files/Image [3].png" type="image/png" data-filename="" width="460"/></div><div><br/></div></div></span>
</div></body></html> 